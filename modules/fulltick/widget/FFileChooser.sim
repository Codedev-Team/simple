module fulltick.widget.menu call "./FFileListBox.sim" ?fulltick.core class FFileChooser :FFileListBox FILE_CHOOSER_DIRECTORY ="."  FILE_CHOOSER_FILTER ="*"  FILE_CHOOSER_OK_LABEL ="ok"  FILE_CHOOSER_SELECTION_TYPE =0  FILE_CHOOSER_ICON_SIZE =20  FILE_CHOOSER_COLOR =new FColor  FILE_CHOOSER_PREVIEW =false  setTypeName("FFileChooser") block FFileChooser(dir,title) initialize() setDirectory(dir) setTitle(title) block show() __show_file_chooser(WIDGETPOINTER) waitTillSelection() return this block setColor(color) if isNumber(color) FILE_CHOOSER_COLOR =new FColor FILE_CHOOSER_COLOR.setColorValue(color) else FILE_CHOOSER_COLOR =color end __file_chooser_color(WIDGETPOINTER,FILE_CHOOSER_COLOR.getColor()) return this block getColor() return FILE_CHOOSER_COLOR block filter(filter) FILE_CHOOSER_FILTER =replaceString(filter,'~',tab) __file_chooser_filter(WIDGETPOINTER,-2,FILE_CHOOSER_FILTER) return this block getFilter() return FILE_CHOOSER_FILTER block getSelectedFilterIndex() return __file_chooser_filter(WIDGETPOINTER,-1,"") block selectFilterAt(index) __file_chooser_filter(WIDGETPOINTER,index,"") return this block getCount() return __file_chooser_count(WIDGETPOINTER) block setDirectory(directory) FILE_CHOOSER_DIRECTORY =directory __file_chooser_directory(WIDGETPOINTER,FILE_CHOOSER_DIRECTORY) return this block getDirectory() FILE_CHOOSER_DIRECTORY =__file_chooser_get_directory(WIDGETPOINTER) return FILE_CHOOSER_DIRECTORY block hide() __hide_file_chooser(WIDGETPOINTER) return this block setIconSize(size) FILE_CHOOSER_ICON_SIZE =size __file_chooser_iconsize(WIDGETPOINTER,FILE_CHOOSER_ICON_SIZE) return this block getIconSize() return FILE_CHOOSER_ICON_SIZE block setTitle(title) WIDGET_TITLE =title __file_chooser_label(WIDGETPOINTER,WIDGET_TITLE) return this block getTitle() return WIDGET_TITLE block setAcceptLabel(label) FILE_CHOOSER_OK_LABEL =label __file_chooser_ok_label(WIDGETPOINTER,FILE_CHOOSER_OK_LABEL) return this block getAcceptLabel() return FILE_CHOOSER_OK_LABEL block setOkLabel(label)return setAcceptLabel(label) block getOkLabel()return getAcceptLabel() block preview(condition) FILE_CHOOSER_PREVIEW =condition __file_chooser_preview(WIDGETPOINTER,FILE_CHOOSER_PREVIEW) return this block isPreviewing() return FILE_CHOOSER_PREVIEW block rescan() __file_chooser_rescan(WIDGETPOINTER) return this block refresh()return rescan() block isShown() return __file_chooser_is_shown(WIDGETPOINTER) block setValue(value) FILE_CHOOSER_VALUE =value __file_chooser_value(WIDGETPOINTER,true,FILE_CHOOSER_VALUE) return this block getValue() FILE_CHOOSER_VALUE =__file_chooser_value(WIDGETPOINTER,false,null) return FILE_CHOOSER_VALUE block initialize() WIDGETPOINTER =__init_file_chooser(FILE_CHOOSER_DIRECTORY,FILE_CHOOSER_FILTER,FILE_CHOOSER_SELECTION_TYPE,WIDGET_TITLE) private  block waitTillSelection() __file_chooser_wait(WIDGETPOINTER)